---
layout: post
title: Ruby 元编程读书笔记十三
excerpt: "类定义"
categories: [Ruby 元编程]
tags: Ruby 元编程
comments: true
---

单件方法：
paragraph = "any string can be a paragraph"
def paragraph.title?
  self.upcase == self
end
单件方法不仅仅用于增强某个对象，它们也是ruby中一些最常见特性的基石

类只是对象，而类名只是常量，在类上调用方法就跟在对象上调用方法一样：
an_object.a_method
AClass.a_class_method

类方法的实质就是--它们是一个类的单件方法。如果比较单件方法的定义和类方法的定义，会发现它们是一样的：
def obj.a_singleton_method;end
def MyClass.another_class_method;end
如果在类定义中写入代码，由于这时self就是类本身，所以还可以利用这一点用self替换类名来定义类方法：
class MyClass
  def self.yet_another_class_method;end
end

类方法的定义方式：
第一种
class << HelloWorld
  def hello(name)
    puts "#{name} said hello."
  end
end
第二种
class HelloWorld
  class << self
    def hello(name)
      puts "#{name} said hello."
    end
  end
end
第三种
def HelloWorld.hello(name)
  puts "#{name} said hello."
end
第四种
class HelloWorld
  def self.hello(name)
    puts "#{name} said hello."
  end
end
其中class << 类名 ～ end 这种写法的类定义被称为单例类定义，单例类定义中定义的方法被称为单例方法
通过利用单例类定义，可以给对象添加单例方法，单例类定义也被用于定义对象的专属实例方法：
str1 = "ruby"
str2 = "ruby"
class << str1
  def hello
    "Hello, #{self}!"
  end
end
p str1.hello   #=> "Hello, ruby!"
p str2.hello   #=> NoMethodError

当类包含模块时，它获得的是该模块的实例方法，而不是类方法。
